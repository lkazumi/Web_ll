<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Lista de Funcionarios</title>
</h:head>
<h:body>
	<h:form>
		<p:menubar>
			<p:submenu label="Menu">
				<p:menuitem value="Menu" outcome="menu" />
			</p:submenu>

			<p:submenu label="Cadastro">
			    <p:menuitem value="Cargo" outcome="cadastroCargo.xhtml" />
			    <p:menuitem value="Funcionario" outcome="cadastroFuncionario.xhtml" />
			</p:submenu>
			
			<p:submenu label="lista">
				<p:menuitem value="Listagem de Cargos" outcome="listaCargo.xhtml" />
				<p:menuitem value="Listagem de Funcionarios" outcome="listaFuncionario.xhtml" />
			</p:submenu>

		</p:menubar>
		<h1>Lista Funcionarios</h1>
		<p:dataTable value="#{funcionarioControllerMike.lista}" var="func"
			border="1" id="viagem" paginator="true" rows="5"
			emptyMessage="Nenhum Funcionario cadastrado!">

			<p:column headerText="Id">
				<h:outputText value="#{func.id}" />
			</p:column>

			<p:column headerText="Nome ">
				<h:outputText value="#{func.nome}" />
			</p:column>

			<p:column headerText="CPF">
				<h:outputText value="#{func.cpf}" />
			</p:column>

			<p:column headerText="Matricula ">
				<h:outputText value="#{func.matricula}" />
			</p:column>

			<p:column headerText="Cargo">
				<h:outputText value="#{func.cargo.cargo}" />
			</p:column>

			<p:column headerText="Salario">
				<h:outputText value="#{func.salario}" />
			</p:column>

			<p:column headerText="Data de Admissão">
				<h:outputText value="#{func.admissao}">
					<f:convertDateTime pattern="dd/MM/yyyy"
						timeZone="America/Sao_Paulo" />
				</h:outputText>
			</p:column>

			<p:column headerText="Salario Atualizado">
				<h:outputText value="#{func.salarioAtt}" />
			</p:column>
			

			<p:column headerText="Ação">
				<p:commandButton value="Excluir"
					action="#{funcionarioControllerMike.excluir}"
					onclick="return confirm('Confirma a exclusão?')" ajax="false">
					<f:setPropertyActionListener value="#{func}"
						target="#{funcionarioControllerMike.func}" />
				</p:commandButton>
				<p:commandButton value="Editar"
					action="#{funcionarioControllerMike.editar}" ajax="false">
					<f:setPropertyActionListener value="#{func}"
						target="#{funcionarioControllerMike.func}" />
				</p:commandButton>
			</p:column>

		</p:dataTable>
		<h:commandLink>
			<p:graphicImage title="Exportar para XML" name="/imagens/xml.png"
				width="24" />
			<p:dataExporter type="xml" target="viagenss" fileName="lista" />
		</h:commandLink>
	</h:form>
</h:body>
</html>